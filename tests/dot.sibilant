

(include "kit/header"
         "kit-html/src/dom")

(import-namespace kit)
(import-namespace dom)
(include "../inc/electron")

(require! (lit Game) "../src/game"
          (lit Rendering) "../src/systems/rendering/rendering"
          (lit Dot) "../src/systems/rendering/dot"
          (lit Position) "../src/systems/position"
          (lit Physics) "../src/systems/physics")


(const rendering (.load Rendering
                        (lit (size (.sub Scalar  (window.size) 8))
                             (limit 100)
                             (blend true))))

(.resize rendering (.sub Scalar  (window.size) 4))

(var stage (dom (.div .id 'stage )))


(var container
     (dom
      (.div .id "container"
            rendering.context.canvas)))
(with-dom Document-root
          (.div .id 'frame container))

(var game ((create Game) rendering [Physics   Position   Dot]))
(.start game)

(def entity (aspects data) (.spawn game.ent aspects data))
(def rgba (r g b a) (lit r g b a))
(def coordinate (x y))
(def physical-properties (mass scale forces)
     (lit mass scale forces))

(entity [Dot Position Physics]
        (rgba 255 0 0 255)
        (coordinate 500 500)
        (physical-properties 10 10 []))
